{% extends 'general/base.html' %}

{% block content %}
    <h1>List files</h1>

    <form method="get">
        <select name="filetype_choice" onchange="this.form.submit()">
            <option>All</option> <!-- all types -->
            {% for type in file_types_list %}
                <option value="{{ type }}" {% if type == filetype %} selected="true" {% endif %}>{{ type }}</option>
            {% endfor %}
        </select>
    </form>

    <table>
        <th colspan="2">
            <a href="{% url 'file-upload' %}">UPLOAD</a>
        </th>
        {% for file in object_list %}
            <tr>
                <td width="50%" align="center">
                    <input type="checkbox" id="{{ file.id }}"/>
                </td>
                <td width="25%">
                    <a href="{{ file.file.url }}">{{ file.name }}</a>
                </td>
                <td width="25%">
                    <a href="{% url 'comment' file.pk %}">{{ file.comments.count }} comments</a>
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock content %}